pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--aus
--the sailor

--notes
-- a knobel dice game where you
-- battle animals from namibia

--todo
----------

-->8
--main
function _init()
	--‚òÖ
	debug={}
	
	ini_menu()
end

function _update60()
	_upd()
end

function _draw()
	_drw()
	
	--‚òÖ
	if #debug>0 then
		for i=1,#debug do
			print(debug[i],1,1,8)
		end
	end
end
-->8
--screens

function ini_menu()
	_upd=upd_menu
	_drw=drw_menu
end

function ini_game()
	
	--mkae dice
	dices={}
	for i=1,3 do
		add(dices,{
			x=13+((i-1)*35),
			y=62,
			sel=false,
			num=1+flr(rnd(6))
		})
	end
	
	highdice=2
	
	
	
	_upd=upd_game
	_drw=drw_game
end

-->8
--updates

function upd_menu()
	if btnp(üÖæÔ∏è) then ini_game() end
end

function upd_game()
	if btnp(‚û°Ô∏è) and highdice<3 then
		highdice+=1
	end
	if btnp(‚¨ÖÔ∏è) and highdice>1 then
		highdice-=1
	end
	
	if btnp(üÖæÔ∏è) then
		if dices[highdice].sel then
			dices[highdice].sel=false
		else
			dices[highdice].sel=true
		end
	end
end
-->8
--draws

function drw_menu()
	cls()
	cprint("aus",32,7)
end

function drw_game()
	cls()
	
	--bkg
	ovalfill(4,80,124,110,3)
	sspr(96,0,23,36,1,76)
	sspr(86,35,74,34,104,79)
	
	--boss dice
	sspr(0,0,50,46,2,2)
	
	--player dice
	for i=1,#dices do
		local ny=0
		if dices[i].sel then
			ny=20+sin((time()-(i*12))*1.2)*1.4
			ovalfill(
				38+((i-1)*35)+cos(time()),86,
				20+((i-1)*35)-cos(time()),88,
				1)
		else
			ovalfill(
				9+((i-1)*35),86,
				48+((i-1)*35),98,
				1)
		end
			
		sspr(64,0,32,31,dices[i].x,dices[i].y-ny)
		local ty=0
		for i=1,3 do
			if dices[i].sel then
				ty=20+sin((time()-(i*12))*1.2)*1.4
			else 
				ty=0
			end
			
			dots(
				dices[i].x+8,
				(dices[i].y+5)-ty,
				dices[i].num
				)
		end
	end
	
	--cursor
	local oy=0
	for i=1,#dices do
		if dices[highdice].sel then
			oy=20
		end
	end
	sspr(50,16,10,11,24+((highdice-1)*35),(48-oy)+sin(time()))
end
-->8
--tools

function cprint(_s,_y,_c)
	print(_s,64-(#_s*2),_y,_c)
end

function dots(_x,_y,_num)
		local sx
		if _num==6 then
			sx=0
		elseif _num==5 then
			sx=16
		elseif _num==4 then
			sx=32
		elseif _num==3 then
			sx=48
		elseif _num==2 then
			sx=64
		else
			sx=80
		end
		
		sspr(sx,106,16,22,_x,_y)
end
__gfx__
00000000000aaa0000000000000000000000aaa000000000000ffffffffffff000fff9999999999999999999999fff0030000000000000000000000000000000
0000000000a555aa000000000000000000aa555a0000000000f777777777777f0faaaa44444444444444444444aaaaf00b000000000000000000000000000000
00000000000a5555a0000000000000000a5555a00000000000f777777777777ffaaaa4444444444444444444444aaaaf03b00000000000000000000000000000
000000000000a55d5a00000000000000a5d55a000000000000f77ff7777ff77ffaaa444444444444444444444444aaaf003b0000000000000000000000000000
000000000000a555d5a000000000000a5d555a000000000000f7ffffffffff7ffaa44444444444444444444444444aaf00030000000000000000000000000000
00000000000a1555d5a000000000000a5d5551a00000000000dffffffffffffd9a4444444444444444444444444444a900033000000000000000000000000000
000000000aa5511dd1a000000000000a1dd1155aa000000000dffffffffffffd9444444444444444444444444444444933303000000000000000333000000000
00000000a55555d11a00000000000000a11d55555a00000000dffffffffffffd944444444444444444444444444442210bb33000000000000333333000000000
00000000a5115511a0000000000000000a1155115a00000000dffffffffffffd9444444444444444444444444444422103333000000000333333333000000000
00aaaa0a515511aa000000000000000000aa115515a0aaaa00dffffffffffffd9444444444444444444444444444242100003000000333333333333000000000
0a4999aa555551a00000000000000000000a155555aa9994a0dffffffffffffd9444444444444444444444444442422100003000033333333333333000000000
a444999a55551d1aa0000000000000000aa1d15555a999444ad7ffffffffff7d9444444444444444444444444424242100003003333333333333333000000000
a4444499915155d11aa000000000000aa11d5515199944444ad77ffffffff77d9444444444444444444444444242422100003033333333333333333000000000
a477664499115551d11aaa000000aaa11d155511994466774a1dddddddddddd19444444444444444444444442424222100003333333333333333333000000000
a476556644915115dd1111a0000a1111dd511519446655674ac111111111111c9444444444444444444444444242222100003333333333333333333000000000
a4465515644911551111111a00a1111111551194465155644a0cccccccccccc09444444444444444444444442222222100033333333333333333333000000000
a44651115444411114499991aa19999441111444451115644a007777770000009444444444444444444444442222222100333333333333333333333000000000
a44211111244441144449aa9999aa94444114444211111244a076666667000001244444444444444444444442222222103333333333333333333333000000000
0a442211112444444222999a99a999222444444211112244a07655555567000012244444444442424222444222222221033b3b33333333333333333000000000
00a44222111244451777299944999277715444211122244a0065dddddd56000012222222222224242222222222222221033bb333333333333333333000000000
000a422222124455177772944449277771554421222224a0006d76dd76d60000122222222222222222222222222222210333b333333333333333333000000000
0000a4422222225517b331444444133b7155222222244a00006d66dd66d600001222222222222222222222222222222100333333333333333333333000000000
00000aaa4222245511371144444411731155422224aaa00000655666655600001222222222222222222222222222222100033333333333333333333000000000
00000000aaaa24455131114444441113155442aaaa00000000065566556000001222222222222222222222222222222103303333333333333333333000000000
00000000000a24444511114422441111544442a00000000000006555560000001222222222222222222222222222222133330333333333333333333000000000
0000000000a2a244445511422224115544442a2a0000000000000655600000001222222222222222222222222222222103300033333333333333333000000000
000000000a22224a945551444444155549a42222a000000000000066000000001122222222222222222222222222221100003303333333333333333000000000
0000000000a2224994455244444425544994222a00000000000000000000000011122222222222222222222222222111000333300333333b3333333000000000
000000000a2a22449944524444442544994422a2a000000000000000000000001511d2222222222222222222222d11513000330030033b3b3333333000000000
0000000000a2222449944544444454499442222a00000000000000000000000001511d22222222222222222222d1151000000000003000333333333000000000
00000000000aa222444452499994254444222aa0000000000000000000000000001111dddddddddddddddddddd11110000333000000003033333333000000000
0000000000000a2224455244994425544222a000000000000000cccccccccccccc0000cccccccccccccc00000000000003333300333300333330333000000000
00000000000000a56445522444422554465a000000000000000caaaaaaaaaaaaaac00cffffffffffffffc0000000000000333003333330033300300000000000
000000000000000a574455522225554475a000000000000000cabbbbbbbbbbbbbbaccfeeeeeeeeeeeeeefc000000000000000000333300000003330000000000
0000000000000000a5744511111154475a0000000000000000cbbbbbbbbbbbbbbbbccdeeeeeeeeeeeeeedc000000000000003030000000030000300000000000
0000000000000000a56541d1111d14565a0000000000000000cbbbbbb11111b1bbbccdeeee111111eeeedc000000000000000000000030000000000000000000
00000000000000000a55511d7dd11555a00000000000000000cbbbbb11111111bbbccdeee11111111eeedc00000000000000000000b300000000000000000000
00000000000000000a55511dddd11555a00000000000000000c3bbb111aab111bb3ccdee1111111111eedc00000000000000000000b000000000000000000000
000000000000000000a565111111565a000000000000000000c3bb11aabb1111bb3ccdee111eeee111eedc0000000000000000000b3000000000000000000000
0000000000000000000a5751111575a0000000000000000000c3bb1bbbbbbbbbbb3ccdee111eeee111eedc300000000000000000033000000000000000000000
0000000000000000000a5752882575a0000000000000000000c3bbbbbbbbbbb1bb3ccdee111dddd111eedc333300000000000000033000000000000000000000
00000000000000000000a57555575a00000000000000000000c3bb1111bbbb11bb3ccdee1111111111eedc333333300000000000033000000000000000000000
00000000000000000000a57777775a00000000000000000000c3bb111bbb1113bb3ccdeef11111111feedc333333333300000000030000000000000000000000
000000000000000000000a555555a000000000000000000000c3bb111111113bbb3ccdeeef111111feeedc333333333333000000030000000000000000000000
0000000000000000000000aa55aa0000000000000000000000c3bb13111113bbbb3ccdeeeeffffffeeeedc333333333333330000330000000000000000000000
000000000000000000000000aa000000000000000000000000c1ab3333333bbbba1cc1feeeeeeeeeeeef1c333333333333333000300300000000000000000000
00000000000000000000000000000000000000000000000000c1333333333333331cc1dddddddddddddd1c333333333333333300303000000000000000000000
00000000000000000000000000000000000000000000000000561111111111111165561111111111111165333333333333333333333000000000000000000000
00000000000000000000000000000000000000000000000000556666666666666655556666666666666655333333333333333333330000000000000000000000
00000000000000000000000000000000000000000000000000055555555555555550055555555555555550333333333333333333300000000000000000000000
0000000000000000000000000000000000000000000000000000000000000411144111444444444444111433333333333333333b330000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111444444444411111333333333333b333b3330000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111444444444411111333333333333bb3bb3330000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111444444444411111333333333333bb3bb3330000000000000000000000
000000000000000000000000000000000000000000000000000000000000091119911194444444444911193333333333333b3b33330000000000000000000000
00000000000000000000000000000000000000000000000000000000000004999449994444444444449994333333333333333333300000000000000000000000
00000000000000000000000000000000000000000000000000000000000004444444444444444444444444333333333333333333033000000000000000000000
00000000000000000000000000000000000000000000000000000000000004444444444444444444444444333333333333333330333300000000000000000000
00000000000000000000000000000000000000000000000000000000000004111444444444444111444444333333333333333300033000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111144444444441111144444333333333333333033000000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111144444444441111144444333333333333300333300000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111144444444441111144444333333333330030033000300000000000000000000
00000000000000000000000000000000000000000000000000000000000009111944444444449111944444333333330003000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000004999444444444444999444444333333303000000003330000000000000000000000
00000000000000000000000000000000000000000000000000000000000002222222222222222222222222330333330033330033333000000000000000000000
00000000000000000000000000000000000000000000000000000000000002222222222222222222222222030033300333333003330000000000000000000000
00000000000000000000000000000000000000000000000000000000000002111221112211122222222222333000000033330000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111111112222222222030000300000000303000000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111111112222222222000000000300000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000001111111111111112222222222000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000004111441114411142222222222000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000002444224442244422222222222000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01110000000011100111000000001110011100000000111000000000000011100000000000001110000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111100000000000111110000000000011111000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111100000000000111110000000000011111000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111100000000000111110000000000011111000000000000000000000000000000000000000000000000
91119000000911199111900000091119911190000009111900000000000911190000000000091119000000000000000000000000000000000000000000000000
09990000000099900999000000009990099900000000999000000000000099900000000000009990000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01110000000011100000000111000000000000000000000000000001110000000000000000000000000000011100000000000000000000000000000000000000
11111000000111110000001111100000000000000000000000000011111000000000000000000000000000111110000000000000000000000000000000000000
11111000000111110000001111100000000000000000000000000011111000000000000000000000000000111110000000000000000000000000000000000000
11111000000111110000001111100000000000000000000000000011111000000000000000000000000000111110000000000000000000000000000000000000
91119000000911190000009111900000000000000000000000000091119000000000000000000000000000911190000000000000000000000000000000000000
09990000000099900000000999000000000000000000000000000009990000000000000000000000000000099900000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01110000000011100111000000001110011100000000111001110000000000000111000000000000000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111111111000000000001111100000000000000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111111111000000000001111100000000000000000000000000000000000000000000000000000000000
11111000000111111111100000011111111110000001111111111000000000001111100000000000000000000000000000000000000000000000000000000000
41114000000411144111400000041114411140000004111441114000000000004111400000000000000000000000000000000000000000000000000000000000
04440000000044400444000000004440044400000000444004440000000000000444000000000000000000000000000000000000000000000000000000000000
