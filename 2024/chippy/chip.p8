pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--main
function _init()
	score=0
	
	_upd=upd_menu
	_drw=drw_menu
end

function _update60()
	_upd()
end

function _draw()
	_drw()
end
-->8
--draws
function drw_menu()
	cls()
	cprint("ch1ppy",22,7)
	cprint("press 🅾️/z",34,1)
end

function drw_game()
	cls(0)
	
	--disc
	drw_disc()
	print(plr.yvel,2,2,7)
	
	--player
	sspr(plr.spx,plr.spy,plr.w,plr.h,
						plr.x,plr.y,plr.w,plr.h,plr.flp)
	
end

function drw_disc()
	//circfill(disc.x,disc.y,disc.r,disc.c)
	sspr(disc.spx,disc.spy,disc.w,disc.h,disc.x,disc.y)
end
-->8
--updates
function upd_menu()
	if btnp(4) then
		mk_disc()
		mk_plr()
		_upd=upd_game
		_drw=drw_game
	end
end

function upd_game()
	upd_plr()
	upd_disc()
end

function upd_plr()
	if plr.x<0 then plr.x=0 end
	if plr.x+plr.w>127 then plr.x=127-plr.w end
	
	if plr.y+plr.h>=plr.floor then
		plr.yvel=0
		plr.y=plr.floor-plr.h
		if plr.jbuf==1 then
			sfx(0)
			plr.yvel=plr.jmp
			plr.jbuf=0
		end
	else
		plr.yvel+=plr.grav
	end
	
	if btn(0) and plr.x>0 then
		plr.xvel-=plr.spd
		plr.flp=true
	elseif btn(1) and plr.x+plr.w<127 then
		plr.xvel+=plr.spd
		plr.flp=false
	end
	
	if btnp(4) then
		if plr.yvel==0 and plr.ypos==plr.floor then
			sfx(0)
			plr.yvel=plr.jmp
		else
			plr.jbuf=1
		end
	end 
	
	--friction
	if plr.yvel!=0 then
		plr.xvel*=0.55
	else
		plr.xvel*=0.7
	end
	
	
	catch_disc()
	
	plr.y+=plr.yvel
	plr.x+=plr.xvel
end

function upd_disc()
	
	if disc.y>plr.floor then
		mk_disc()
	else
		disc.y+=disc.spd
	end
end


-->8
--tools
function cprint(str,ypos,col)
	local s=str
	print(s,64-(#s*2),ypos,col)
end

function mk_plr()
	plr={
		x=32,
		y=100,
		floor=120,
		w=16,
		h=16,
		flp=false,
		spd=1,
		xvel=0,
		yvel=0,
		grav=0.25,
		jmp=-4,
		jbuf=0,
		spx=60,
		spy=0
	}
end

function mk_disc()
	local rx,ry=1+rnd(115),-18-rnd(36)
	local rs=1+flr(rnd(1))
	disc={
		x=rx,
		y=ry,
		spd=rs,
		w=12,
		h=18,
		spx=0,
		spy=24
	}
end

function catch_disc()
	if plr.x+plr.w>disc.x and
				plr.x<disc.x+disc.w and
				plr.y<disc.y+disc.h and
				plr.y+plr.h>disc.y then
				sfx(1)
				score+=1
				mk_disc()
	end
end
__gfx__
01111111111111100100000000000000000000000000000000000000001000000000111111100000000000000111000000000000000000000000000000000000
1ffffff55ffffff11010000000000000000000000000000000000000010100011111888888810000111111111188100000000000000000000000000000000000
19955555999999911010000000000000000000000000000000000000010100188888888888810011228888888888100000000000000000000000000000000000
11111111111111110100000000000000000000000000000000000000001001882888888282810122222288222288100000000000000000000000000000000000
15559999599999110100000000000000000000000000000000000000001001822ff2288222210012dddddfddddd8100000000000000000000000000000000000
155ffff59f1f9191101000000000000000000000000000000000000001010122fff2882ee1210012d777dfd777d8100000000000000000000000000000000000
15ffff5ffff91991101000000000000000000000000000000000000001010122dddd22dddd100111d777dfd777d1000000000000000000000000000000000000
1ffff5ffff919991010000000000000000000000000000000000000000101111d7bd11d7bd1016cc177b11177b1c100000000000000000000000000000000000
1fff5ffff91999910100000000000000000000000000000000000000001011fe1771ff17711016cc177b1ff77b1c100000000000000000000000000000000000
1ff5ffff919999511010000000000000000000000000000000000000010101fe1111ff1111101ccc11111ff1111c100000000000000000000000000000000000
1f5ff1f919995551101000000000000000000000000000000000000001010011ff888222e10001111ff888222e11000000000000000000000000000000000000
15ffff91999555510100000000000000000000000000000000000000001001111188fe221000001771188fe22100000000000000000000000000000000000000
111111111111111101000000000000000000000aa00000000000000000101716cc175561c1000001167775561000000000000000000000000000000000000000
1fffffff955555511010000000000000000000a999110000011000000101171ccc177661c1000000016777661000000000000000000000000000000000000000
1999999955555551101000001110bbbbb008eee991111bbb11110000010101111144411110000000014441111000000000000000000000000000000000000000
0111111111111110010000aa111bbbb33308eee33311333bb18eeee0001000014444412210000000144410121000000000000000000000000000000000000000
00999100666666660100999911bbbb3333888e3333113333b888eee0001000019999944410000000011100011000000000000000000000000000000000000000
00888100dddddddd0011111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000
0088810011111111001111ddddd6666666666666666666666ddddd11110000000000000000000000000000000000000000000000000000000000000000000000
09999910666666660001111111111111111666666111111111111111100000000000000000000000000000000000000000000000000000000000000000000000
099999106d6dd6d6000111111dddddddddd111111dddddddddd11111100000000000000000000000000000000000000000000000000000000000000000000000
088888106d6776d60000151111111111111111111111111111111151000000000000000000000000000000000000000000000000000000000000000000000000
08888810676666760000155555555555555555555555555555555551000000000000000000000000000000000000000000000000000000000000000000000000
888888816666666600001555ddd5555555555dd5555555555ddd5551000000000000000000000000000000000000000000000000000000000000000000000000
000ffffff000000000001555d1d555555555d11d555555555d1d5551000000000000000000000000000000000000000000000000000000000000000000000000
000f9442f0000000000001d5ddd111111115d11d511111111ddd5d10000000000000000000000000000000000000000000000000000000000000000000000000
000f4422f00000000000001d5111111111111dd1111111111115d100000000000000000000000000000000000000000000000000000000000000000000000000
00fddddddf00000000000001d51111111111111111111111115d1000000000000000000000000000000000000000000000000000000000000000000000000000
00fd76ccdf000000000000001dd1111111111111111111111dd10000000000000000000000000000000000000000000000000000000000000000000000000000
000fd6cdf000000000000000011d51111111111111111115d1100000000000000000000000000000000000000000000000000000000000000000000000000000
00fd76ccdf000000000000000001ddd11111111111111ddd10000000000000000000000000000000000000000000000000000000000000000000000000000000
0fd76666cdf00000000000000000111dddd555555dddd11100000000000000000000000000000000000000000000000000000000000000000000000000000000
fd777aa66cdf00000000000000000001111dddddd111100022422224222242220000000000000000000000000000000000000000000000000000000000000000
fd67aaa96cdf00000000000000000000001111111100000044444444444444440000000000000000000000000000000000000000000000000000000000000000
fd6aa9949cdf1cccccccc10000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
fd6a9a44acdf1aaaaaaaa10000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
1fd699aacdf11a88aa88a10000000000000000000000000044444444444444440000000000000000000000000000000000000000000000000000000000000000
11fd666cdf111a88aa88a10000000000000000000000000022422224222242220000000000000000000000000000000000000000000000000000000000000000
111fddddf1111aaa88aaa10000000000000000000000000022422224222242220000000000000000000000000000000000000000000000000000000000000000
0111ffff11101a889988a10000000000000000000000000044444444444444440000000000000000000000000000000000000000000000000000000000000000
0011111111001a889988a10000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
0001111110001aa99999a10000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
0000111100001a911119910000000000000000000000000044444444444444440000000000000000000000000000000000000000000000000000000000000000
00000000000019910019910000000000000000000000000022422224222242220000000000000000000000000000000000000000000000000000000000000000
00000000000019100001910000000000000000000000000022422224222242220000000000000000000000000000000000000000000000000000000000000000
00000000000001000000100000000000000000000000000044444444444444440000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000022224222242222420000000000000000000000000000000000000000000000000000000000000000
__map__
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4646464646464646464646464646464646464646464646464646464646464646460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100001305012350000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100002e5503755024550305500a550055500355000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500
